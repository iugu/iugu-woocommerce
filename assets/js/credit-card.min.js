!function(e){"use strict";e(function(){function r(r){if(u)return u=!1,!0;if(!e("#payment_method_iugu-credit-card").is(":checked"))return!0;var i=e(r),c=i.find("#iugu-card-expiry").val().replace(" ",""),o=e("#iugu-credit-card-fields",i),t="";return i.find("#iugu-card-expiry").val(c),Iugu.createPaymentToken(r,function(r){r.errors?(e(".woocommerce-error",o).remove(),t+="<ul>",e.each(r.errors,function(e,r){var i=r;"is_invalid"===i&&(i=iugu_wc_credit_card_params.i18n_is_invalid),t+="<li>"+iugu_wc_credit_card_params["i18n_"+e+"_field"]+" "+i+".</li>"}),t+="</ul>",o.prepend('<div class="woocommerce-error">'+t+"</div>")):(e(".iugu-token",i).remove(),i.append(e('<input class="iugu-token" name="iugu_token" type="hidden" />').val(r.id)),u=!0,i.submit())}),!1}function i(){jQuery(".woocommerce-error").is(":visible")||jQuery("#place_order").attr("disabled",!0)}var u=!1;Iugu.setAccountID(iugu_wc_credit_card_params.account_id),"yes"===iugu_wc_credit_card_params.is_sandbox&&Iugu.setTestMode(!0),e("form.checkout").on("checkout_place_order_iugu-credit-card",function(){return r(this)}),e("form#order_review").submit(function(){return r(this)}),e("body").on("checkout_error",function(){e(".iugu-token").remove()}),e("form.checkout, form#order_review").on("change","#iugu-credit-card-fields input",function(){e(".iugu-token").remove()}),e("form#order_review").submit(i),e("form.checkout").on("checkout_place_order_iugu-credit-card",i)})}(jQuery);